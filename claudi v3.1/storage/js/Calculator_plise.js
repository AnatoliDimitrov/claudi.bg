// JavaScript Document
var colorCode = 0;	//default color
var modelCode = 0; // default model
var totalPrice = 0;

var models = ["BB 10", "BB 15", "BB 30", "A0 10", "A0 30", "A0 70", "BF 50", "BF 51",
			  "BB 20", "BB 24", "A0 20", "B0 10", "B0 75", "BB 40", "A0 40"];

var colors = ["Crepe(575****)", "Tendence(44****)", "Flush(65****)", //group 0
"Crepe Topar® Plus(515****)", "Juno(41****)", "Vision(49****)",  //group 1
"Horizon(524****)", "Strata(771**)", "Shade(143****", //group 2
"Crush DustBlock™	(521****)", "Crush Topar® Plus(522****)", "Attia(480****)", "Textura Silk Topar® Plus(530****)", "Jacquard(50***)", "Georgette(739****)", //group 3
"Duette® Unix Duotone(070****)", "Rosen Topar®(900****)", //group 4
"Duette® Fixe 25 mm BlackOut(072****)", "Duette® Montana 25 mm BlackOut(605****)" ];//group 5

var pliseTable10 = [
	[38, 42, 47, 53, 58, 63, 67, 74, 79, 84, 89, 95, 99, 105, 111, 116, 121, 126, 131],
	[38, 43, 47, 53, 59, 68, 74, 79, 85, 90, 95, 100, 106, 111, 117, 122, 128, 132, 138],
	[43, 47, 53, 59, 64, 68, 75, 85, 90, 96, 101, 106, 112, 118, 128, 133, 139, 143, 150],
	[43, 48, 53, 64, 69, 75, 81, 90, 96, 101, 107, 113, 123, 129, 134, 144, 151, 156, 161],
	[43, 53, 59, 64, 69, 81, 86, 91, 101, 107, 113, 123, 129, 134, 146, 151, 156, 162, 173],
	[48, 54, 60, 69, 76, 82, 91, 97, 103, 114, 120, 124, 135, 141, 152, 158, 163, 173, 179],
	[48, 54, 64, 69, 77, 87, 92, 103, 108, 120, 126, 131, 141, 147, 159, 164, 174, 180, 191],
	[48, 60, 65, 76, 82, 92, 98, 108, 116, 126, 131, 142, 149, 159, 164, 175, 182, 191, 197],
	[49, 60, 65, 77, 83, 92, 104, 110, 121, 127, 137, 143, 154, 165, 171, 182, 188, 198, 204],
	[54, 60, 70, 77, 88, 98, 105, 116, 127, 132, 143, 150, 161, 171, 176, 188, 200, 205, 214],
	[54, 65, 70, 83, 93, 104, 111, 121, 128, 138, 150, 161, 166, 177, 188, 195, 205, 216, 223],
	[55, 65, 77, 88, 93, 105, 117, 127, 133, 144, 155, 166, 177, 184, 195, 206, 216, 224, 234],
	[55, 66, 78, 88, 99, 111, 117, 128, 139, 151, 162, 167, 179, 190, 202, 211, 224, 230, 240],
	[61, 70, 78, 89, 100, 112, 122, 133, 144, 156, 167, 173, 190, 196, 207, 219, 230, 242, 252],
	[61, 71, 84, 95, 106, 118, 128, 139, 151, 162, 173, 180, 196, 207, 219, 230, 242, 247, 258],
	[61, 71, 84, 95, 106, 118, 129, 140, 152, 163, 174, 186, 203, 213, 221, 236, 248, 254, 266],
	[66, 78, 89, 100, 112, 123, 134, 146, 158, 168, 180, 192, 208, 221, 231, 243, 254, 266, 276],
	[66, 78, 89, 100, 113, 129, 140, 152, 164, 175, 187, 198, 213, 227, 237, 249, 260, 277, 290],
	[66, 79, 90, 106, 118, 130, 141, 158, 169, 182, 192, 204, 222, 232, 244, 256, 272, 282, 0],
	[67, 84, 95, 107, 119, 135, 147, 159, 169, 187, 198, 210, 227, 239, 250, 268, 278, 291, 0],
	[71, 85, 96, 113, 124, 141, 153, 164, 176, 192, 205, 216, 233, 245, 263, 273, 285, 0, 0],
	[71, 85, 96, 113, 124, 141, 154, 165, 183, 194, 210, 223, 234, 251, 264, 279, 0, 0, 0]
];

var pliseTable20 = [
	[48, 58, 63, 67, 78, 83, 87, 97, 102, 107, 111, 122, 127, 135, 141, 146, 155, 161, 166],
	[53, 59, 63, 72, 79, 87, 92, 97, 103, 112, 117, 123, 132, 137, 147, 151, 161, 167, 171],
	[53, 59, 68, 72, 83, 88, 98, 103, 108, 118, 123, 132, 138, 148, 152, 162, 167, 172, 182],
	[54, 63, 68, 79, 84, 92, 103, 108, 113, 124, 132, 138, 148, 153, 162, 172, 177, 188, 192],
	[59, 64, 74, 79, 88, 98, 104, 113, 118, 128, 138, 144, 153, 163, 169, 177, 188, 193, 203],
	[59, 68, 74, 84, 89, 100, 109, 113, 124, 133, 139, 149, 159, 164, 174, 184, 194, 198, 208],
	[59, 68, 79, 84, 93, 104, 113, 119, 129, 139, 145, 154, 164, 174, 180, 190, 200, 210, 215],
	[64, 69, 80, 89, 100, 109, 114, 125, 134, 145, 154, 160, 170, 180, 190, 200, 210, 215, 225],
	[64, 74, 80, 89, 100, 109, 119, 130, 134, 150, 155, 166, 175, 185, 195, 205, 215, 221, 230],
	[64, 74, 85, 95, 105, 114, 125, 130, 140, 150, 161, 171, 181, 191, 201, 211, 222, 232, 242],
	[64, 75, 85, 95, 105, 120, 126, 135, 146, 155, 167, 176, 191, 196, 206, 222, 232, 237, 247],
	[69, 80, 89, 101, 110, 120, 130, 141, 151, 161, 171, 182, 196, 207, 217, 227, 237, 248, 258],
	[69, 80, 90, 101, 110, 126, 135, 146, 156, 167, 176, 188, 197, 213, 223, 233, 243, 254, 264],
	[69, 81, 90, 106, 116, 126, 137, 151, 162, 172, 182, 193, 207, 218, 228, 238, 254, 264, 274],
	[75, 85, 95, 106, 122, 131, 141, 152, 167, 177, 188, 198, 213, 224, 234, 249, 259, 270, 280],
	[75, 85, 96, 110, 122, 137, 147, 156, 168, 183, 193, 204, 218, 229, 239, 255, 265, 276, 290],
	[75, 86, 101, 111, 127, 137, 148, 162, 173, 189, 198, 208, 224, 235, 245, 260, 276, 286, 296],
	[75, 90, 102, 116, 127, 142, 152, 168, 179, 193, 204, 214, 229, 245, 256, 270, 281, 291, 307],
	[81, 90, 102, 117, 132, 142, 158, 169, 179, 194, 210, 219, 235, 246, 261, 277, 287, 302, 0],
	[81, 90, 106, 122, 132, 148, 163, 173, 184, 200, 215, 225, 240, 256, 267, 282, 298, 308, 0],
	[81, 96, 107, 123, 138, 153, 163, 179, 190, 205, 221, 230, 246, 261, 272, 292, 303, 0, 0],
	[81, 96, 111, 123, 138, 153, 169, 180, 195, 211, 221, 236, 251, 263, 278, 293, 0, 0, 0]
];

var Coeficient = [1.00,1.10,1.30,1.40,1.60,2.10];

function printOption(option)
{
	for (var i = 0; i < option.length; i++)
	{
		document.write("<option value=" + 'option[i]' + ">"  + option[i] + "</option>");
	}
}

//Receving Info from dropdown menu
function getColor(color)
{
	colorCode = color.selectedIndex;
}
	
function getModel(model)
{
	modelCode = model.selectedIndex;
}

function findPrize(arg)
{
	var local = Math.round(Math.ceil(arg)/10);
	
	//local = local / 10;
	local = local - 4;
	
	if(local < 0)
	{
		local = 0;
	}
	
	return local;
}

function CheckBoundories(model, width, height)
{
	var errMSG = "Зададените размери са извън позволената ширина/височина на продукта";

	if(width > 220 || width < 20 || height > 250 || height < 20)
	{
		alert(errMSG);
	}
}

function printFinalPrice()
{
	var errMSG = "Зададените размери са извън позволената ширина/височина на продукта";
	var sizeWidth = document.getElementById("sunblindWidth").value; 
	var sizeHeight = document.getElementById("sunblindHeight").value;	
	var discount = 6;	//precent discount
	
	CheckBoundories (modelCode, sizeWidth, sizeHeight);
	
	sizeWidth = findPrize(sizeWidth);
	sizeHeight = findPrize(sizeHeight);
	
	if (modelCode < 8)
	{
		totalPrice += pliseTable10[sizeHeight][sizeWidth];
		if(totalPrice == 0)
		{
			alert(errMSG);
		}
	}
	else
	{
		totalPrice += pliseTable20[sizeHeight][sizeWidth];
		if(totalPrice == 0)
		{
			alert(errMSG);
		}
	}
	
	var group ;
	switch(colorCode)
	{
		case 0:
		case 1:
		case 2:
		group = 0;
		break
		
		case 3:
		case 4:
		case 5:
		group = 1;
		break
		
		case 6:
		case 7:
		case 8:
		group = 2;
		break
		
		case 9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		group = 3;
		break
		
		case 15:
		case 16:
		group = 4;
		break	
		
		case 17:
		case 18:
		group = 5;
		break
		
		default:
		group = 7;
		break	
	}
	
	totalPrice *= Coeficient[group];
	
	totalPrice -= totalPrice *  (discount /100);
	
	document.getElementById("finalPrice").innerHTML = totalPrice.toFixed(2) + " лв.";
	totalPrice = 0;
	return false;
}