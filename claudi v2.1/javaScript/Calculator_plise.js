// JavaScript Document
var colorCode = 0;	//default color
var modelCode = 0; // default model
var totalPrice = 0;

var models = ["BB 10", "BB 15", "BB 30", "A0 10", "A0 30", "A0 70", "BF 50", "BF 51",
			  "BB 20", "BB 24", "A0 20", "B0 10", "B0 75", "BB 40", "A0 40"];

var colors = ["Crepe(575****)",
              "Crepe Topar® Plus(515****)", "Juno(41****)", "Vision(49****)", 
			  "Horizon(524****)", "Strata SPC®	(771**)", 
			  "Crush DustBlock™	(521****)", "Crush Topar® Plus(522****)", "Attia(480****)", "Textura Silk Topar® Plus(530****)", "Jacquard(50***)",
			  "Duette® Fixe	(071****)", "Duette® Fixe Flow(073****)", "Crepe Metal FR(443****)",
			  "Duette® Fixe 25 mm Blackout(072****)"];

var pliseTable10 = [
[36,40,45,50,55,60,64,70,75,80,85,90,94,100,106,110,115,120,125],
[36,41,45,50,56,65,70,75,81,86,90,95,101,106,111,116,122,126,131],
[41,45,50,56,61,65,71,81,86,91,96,101,107,112,122,127,132,136,143],
[41,46,50,61,66,71,77,86,91,96,102,108,117,123,128,137,144,149,153],
[41,50,56,61,66,77,82,87,96,102,108,117,123,128,139,144,149,154,165],
[46,51,57,66,72,78,87,92,98,109,114,118,129,134,145,150,155,165,170],
[46,51,61,66,73,83,88,98,103,114,120,125,134,140,151,156,166,171,182],
[46,57,62,72,78,88,93,103,110,120,125,135,142,151,156,167,173,182,188],
[47,57,62,73,79,88,99,105,115,121,130,136,147,157,163,173,179,189,194],
[51,57,67,73,84,93,100,110,121,126,136,143,153,163,168,179,190,195,204],
[51,62,67,79,89,99,106,115,122,131,143,153,158,169,179,186,195,206,212],
[52,62,73,84,89,100,111,121,127,137,148,158,169,175,186,196,206,213,223],
[52,63,74,84,94,106,111,122,132,144,154,159,170,181,192,201,213,219,229],
[58,67,74,85,95,107,116,127,137,149,159,165,181,187,197,209,219,230,240],
[58,68,80,90,101,112,122,132,144,154,165,171,187,197,209,219,230,235,246],
[58,68,80,90,101,112,123,133,145,155,166,177,193,203,210,225,236,242,253],
[63,74,85,95,107,117,128,139,150,160,171,183,198,210,220,231,242,253,263],
[63,74,85,95,108,123,133,145,156,167,178,189,203,216,226,237,248,264,276],
[63,75,86,101,112,124,134,150,161,173,183,194,211,221,232,244,259,269,0],
[64,80,90,102,113,129,140,151,161,178,189,200,216,228,238,255,265,277,0],
[68,81,91,108,118,134,146,156,168,183,195,206,222,233,250,260,271,0,0],
[68,81,91,108,118,134,147,157,174,185,200,212,223,239,251,266,0,0,0]
];

var pliseTable20 = [
[46,55,60,64,74,79,83,92,97,102,106,116,121,129,134,139,148,153,158],
[50,56,60,69,75,83,88,92,98,107,111,117,126,130,140,144,153,159,163],
[50,56,65,69,79,84,93,98,103,112,117,126,131,141,145,154,159,164,173],
[51,60,65,75,80,88,98,103,108,118,126,131,141,146,154,164,169,179,183],
[56,61,70,75,84,93,99,108,112,122,131,137,146,155,161,169,179,184,193],
[56,65,70,80,85,95,104,108,118,127,132,142,151,156,166,175,185,189,198],
[56,65,75,80,89,99,108,113,123,132,138,147,156,166,171,181,190,200,205],
[61,66,76,85,95,104,109,119,128,138,147,152,162,171,181,190,200,205,214],
[61,70,76,85,95,104,113,124,128,143,148,158,167,176,186,195,205,210,219],
[61,70,81,90,100,109,119,124,133,143,153,163,172,182,191,201,211,221,230],
[61,71,81,90,100,114,120,129,139,148,159,168,182,187,196,211,221,226,235],
[66,76,85,96,105,114,124,134,144,153,163,173,187,197,207,216,226,236,246],
[66,76,86,96,105,120,129,139,149,159,168,179,188,203,212,222,231,242,251],
[66,77,86,101,110,120,130,144,154,164,173,184,197,208,217,227,242,251,261],
[71,81,90,101,116,125,134,145,159,169,179,189,203,213,223,237,247,257,267],
[71,81,91,105,116,130,140,149,160,174,184,194,208,218,228,243,252,263,276],
[71,82,96,106,121,130,141,154,165,180,189,198,213,224,233,248,263,272,282],
[71,86,97,110,121,135,145,160,170,184,194,204,218,233,244,257,268,277,292],
[77,86,97,111,126,135,150,161,170,185,200,209,224,234,249,264,273,288,0],
[77,86,101,116,126,141,155,165,175,190,205,214,229,244,254,269,284,293,0],
[77,91,102,117,131,146,155,170,181,195,210,219,234,249,259,278,289,0,0],
[77,91,106,117,131,146,161,171,186,201,210,225,239,250,265,279,0,0,0]
];

var Coeficient = [1.00,1.10,1.30,1.40,1.60,2.10];

function printOption(option)
{
	for (var i = 0; i < option.length; i++)
	{
		document.write("<option value=" + 'option[i]' + ">"  + option[i] + "</option>");
	}
}

//Receving Info from dropdown menu
function getColor(color)
{
	colorCode = color.selectedIndex;
}
	
function getModel(model)
{
	modelCode = model.selectedIndex;
}

function findPrize(arg)
{
	var local = Math.round(Math.ceil(arg)/10);
	
	//local = local / 10;
	local = local - 4;
	
	if(local < 0)
	{
		local = 0;
	}
	
	return local;
}

function CheckBoundories(model, width, height)
{
	var errMSG = "Зададените размери са извън позволената ширина/височина на продукта";

	if(width > 220 || width < 20 || height > 250 || height < 20)
	{
		alert(errMSG);
	}
}

function printFinalPrice()
{
	var errMSG = "Зададените размери са извън позволената ширина/височина на продукта";
	var sizeWidth = document.getElementById("sunblindWidth").value; 
	var sizeHeight = document.getElementById("sunblindHeight").value;	
	var discount = 6;	//precent discount
	
	CheckBoundories (modelCode, sizeWidth, sizeHeight);
	
	sizeWidth = findPrize(sizeWidth);
	sizeHeight = findPrize(sizeHeight);
	
	if (modelCode < 8)
	{
		totalPrice += pliseTable10[sizeHeight][sizeWidth];
		if(totalPrice == 0)
		{
			alert(errMSG);
		}
	}
	else
	{
		totalPrice += pliseTable20[sizeHeight][sizeWidth];
		if(totalPrice == 0)
		{
			alert(errMSG);
		}
	}
	
	var group ;
	switch(colorCode)
	{
		case 0:
		group = 0;
		break
		
		case 1:
		case 2:
		group = 1;
		break
		
		case 3:
		group = 2;
		break
		
		case 4:
		case 5:
		case 6:
		group = 3;
		break
		
		case 7:
		case 8:
		case 9:
		group = 4;
		break	
		
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		group = 5;
		break
		
		case 15:
		case 16:
		case 17:
		group = 6;
		break
		
		default:
		group = 7;
		break	
	}
	
	totalPrice *= Coeficient[group];
	
	totalPrice -= totalPrice *  (discount /100);
	
	document.getElementById("finalPrice").innerHTML = totalPrice.toFixed(2) + " лв.";
	totalPrice = 0;
	return false;
}