// JavaScript Document
var models = ["Стил", "Макси Стил"];
var colors = ["Latona", "Iunona", "Vesta", "Pomona", "Minerva",
	"Victoria", "Venera",
	"Fortuna", "Vereda",
	"Frau Perez",
	"Irma", "Imperio C1", "Imperio C2",];

var coeficients =
	[
		[1, 1.1, 1.2, 1.35, 1.60, 1.9,],
		[1, 1.1, 1.2, 1.35, 1.50, 1.75]
	];

var colorCode = 0;	//default color
var modelCode = 0; // default model
var totalPrice = 0;

function printOption(option) {
	for (var i = 0; i < option.length; i++) {
		document.write("<option value=" + 'option[i]' + ">" + option[i] + "</option>");
	}
}

var stillTable =
	[
[37, 42, 48, 55, 60, 66, 71, 77, 82, 88, 95, 100, 106, 112, 117, 122, 128],
[37, 43, 49, 55, 61, 67, 72, 78, 84, 89, 97, 102, 108, 114, 119, 125, 131],
[39, 45, 51, 58, 64, 70, 76, 83, 88, 94, 102, 108, 114, 120, 126, 132, 138],
[39, 46, 52, 59, 66, 72, 78, 84, 90, 96, 104, 110, 116, 123, 129, 135, 141],
[41, 47, 54, 62, 69, 75, 81, 88, 95, 101, 109, 116, 122, 129, 135, 142, 149],
[41, 48, 55, 62, 70, 76, 83, 90, 96, 103, 111, 118, 124, 131, 138, 144, 151],
[42, 49, 55, 63, 71, 77, 84, 91, 98, 104, 113, 120, 126, 133, 140, 147, 154],
[43, 51, 58, 66, 74, 81, 88, 95, 102, 109, 118, 125, 132, 140, 147, 154, 161],
[44, 51, 58, 67, 75, 82, 89, 97, 104, 111, 120, 127, 134, 142, 149, 156, 164],
[45, 53, 61, 70, 78, 85, 93, 101, 108, 116, 125, 133, 140, 148, 156, 163, 171],
[46, 54, 61, 70, 79, 86, 94, 102, 110, 117, 127, 135, 142, 151, 158, 166, 174],
[46, 55, 62, 71, 80, 87, 95, 104, 111, 119, 129, 137, 144, 153, 160, 168, 177],
[48, 56, 64, 74, 83, 91, 99, 108, 116, 124, 134, 142, 150, 159, 167, 175, 184],
[48, 57, 65, 75, 84, 92, 100, 109, 117, 126, 136, 144, 152, 161, 170, 178, 187],
[50, 59, 68, 77, 87, 95, 104, 113, 122, 130, 141, 150, 158, 168, 176, 185, 194],
[50, 60, 68, 78, 88, 97, 105, 115, 123, 132, 143, 152, 160, 170, 179, 187, 197]
	];

var maxiStilTable =
	[
[60, 64, 69, 73, 77, 89, 93, 97, 102, 106, 115, 122, 126, 130, 135, 144, 148, 153, 157, 163, 173, 177, 181, 186, 190, 199, 204],
[61, 66, 70, 74, 79, 90, 95, 99, 104, 108, 118, 124, 128, 133, 137, 147, 151, 155, 160, 166, 176, 180, 185, 189, 193, 203, 207],
[63, 68, 73, 77, 82, 94, 99, 103, 108, 113, 123, 129, 134, 139, 144, 153, 158, 163, 168, 174, 184, 189, 194, 198, 203, 213, 218],
[65, 70, 75, 79, 84, 96, 101, 106, 111, 115, 125, 132, 137, 142, 147, 157, 162, 166, 171, 178, 188, 193, 198, 202, 207, 217, 222],
[67, 72, 77, 82, 87, 100, 105, 110, 115, 120, 131, 138, 143, 148, 153, 163, 169, 174, 179, 186, 196, 201, 207, 212, 217, 227, 232],
[68, 73, 78, 84, 89, 101, 106, 112, 117, 122, 133, 140, 145, 150, 156, 166, 171, 177, 182, 189, 199, 205, 210, 215, 220, 231, 236],
[69, 74, 80, 85, 90, 103, 108, 114, 119, 124, 135, 142, 147, 153, 158, 169, 174, 179, 185, 192, 203, 208, 213, 219, 224, 235, 240],
[71, 76, 82, 88, 93, 106, 112, 118, 123, 129, 140, 148, 153, 159, 164, 175, 181, 187, 192, 200, 211, 217, 222, 228, 234, 245, 250],
[72, 78, 84, 89, 95, 108, 114, 120, 126, 131, 142, 150, 156, 162, 167, 178, 184, 190, 196, 203, 214, 220, 226, 232, 237, 249, 254],
[74, 80, 86, 92, 98, 112, 118, 124, 130, 136, 148, 156, 162, 168, 174, 185, 191, 197, 203, 211, 223, 229, 235, 241, 247, 259, 265],
[76, 82, 88, 94, 100, 114, 120, 126, 132, 139, 150, 158, 164, 171, 177, 188, 194, 201, 207, 215, 226, 233, 239, 245, 251, 263, 269],
[77, 83, 89, 96, 102, 115, 122, 128, 134, 140, 152, 160, 167, 173, 179, 191, 197, 203, 210, 218, 230, 236, 242, 248, 255, 266, 273],
[79, 85, 92, 98, 105, 119, 126, 132, 139, 145, 157, 166, 172, 179, 186, 198, 204, 211, 217, 226, 238, 245, 251, 258, 264, 276, 283],
[80, 86, 93, 100, 106, 121, 127, 134, 141, 147, 159, 168, 175, 181, 188, 200, 207, 214, 220, 229, 241, 248, 254, 261, 268, 280, 287],
[82, 89, 96, 103, 110, 124, 131, 138, 145, 152, 165, 174, 181, 187, 194, 207, 214, 221, 228, 237, 249, 256, 263, 270, 277, 290, 297],
[83, 90, 97, 104, 111, 126, 133, 140, 147, 154, 167, 176, 183, 190, 197, 210, 217, 224, 231, 240, 253, 260, 267, 274, 281, 294, 301],
[84, 91, 98, 105, 113, 127, 134, 142, 149, 156, 169, 178, 185, 192, 200, 212, 219, 227, 234, 243, 256, 263, 270, 277, 285, 297, 305],
[86, 93, 101, 108, 116, 131, 138, 146, 153, 161, 174, 183, 191, 198, 206, 219, 227, 234, 242, 251, 264, 272, 279, 287, 294, 307, 315],
[87, 94, 102, 110, 117, 132, 140, 148, 155, 163, 176, 186, 193, 201, 208, 222, 229, 237, 244, 254, 267, 275, 283, 290, 298, 311, 319],
[89, 97, 104, 112, 120, 136, 144, 152, 160, 168, 181, 191, 199, 207, 215, 228, 236, 244, 252, 262, 276, 284, 292, 299, 307, 321, 329],
[90, 98, 106, 114, 122, 137, 145, 153, 162, 170, 183, 193, 201, 209, 217, 231, 239, 247, 255, 265, 279, 287, 295, 303, 311, 325, 333]
	];

function findPrize(arg) {
	var local = Math.round(Math.ceil(arg) / 10);

	//local = local / 10;
	local = local - 4;

	if (local < 0) {
		local = 0;
	}
	return local;
}

//Receving Info from dropdown menu
function getColor(color) {
	colorCode = color.selectedIndex;
}

function getModel(model) {
	modelCode = model.selectedIndex;
}

function CheckBoundories(model, w, h) {
	var errMSG = "Зададените размери са извън позволената ширина/височина на продукта";
	if (model == 0) {
		if (w < 30 || w > 200 || h < 30 || h > 250) {
			alert(errMSG);
		}
	}
	else {
		if (w < 40 || w > 300 || h < 40 || h > 300) {
			alert(errMSG);
		}
	}
}

function printFinalPrice() {
	var sizeWidth = document.getElementById("sunblindWidth").value;
	var sizeHeight = document.getElementById("sunblindHeight").value;
	var discount = 6;	//precent discount
	var K = 0;	// multiplier
	var strVodene = document.getElementById("stranichnoVodene").checked;

	CheckBoundories(modelCode, sizeWidth, sizeHeight);

	sizeWidth = findPrize(sizeWidth);
	sizeHeight = findPrize(sizeHeight) - 6;
	if (sizeHeight < 0) {
		sizeHeight = 0;
	}


	switch (modelCode) {
		case 0:
			totalPrice = stillTable[sizeHeight][sizeWidth];
			break;

		case 1:
			totalPrice = maxiStilTable[sizeHeight][sizeWidth];
			break;
	}

	switch (colorCode) {
		case 0:
			K = 0;
			break;

		case 1:
		case 2:
		case 3:
		case 4:
			K = 1;
			break;
		case 5:
		case 6:
			K = 2;
			break;
		case 7:
		case 8:
			K = 3;
			break;
		case 9:
			K = 4;
			break;
		case 10:
		case 11:
		case 12:
			K = 5;
			break;
		// case 13:
		// case 14:
		// case 15:
		// K = 6;
		// break;
		// default:
		// K = 7;
		// break;	
	}

	totalPrice *= coeficients[modelCode][K];
	if (strVodene == 1) {
		totalPrice += 6;
	}
	totalPrice -= totalPrice * (discount / 100);

	document.getElementById("finalPrice").innerHTML = totalPrice.toFixed(2) + " лв.";
	totalPrice = 0;
	return false;
}

