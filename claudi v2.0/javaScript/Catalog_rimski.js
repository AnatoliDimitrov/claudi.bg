// JavaScript Document
var models = ["Стил","Макси Стил"];
var colors = ["Latona", "Diana", "Iunona", "Vesta", "Pomona", "Minerva", "Victoria", "Venera",
			 "Fortuna", "Frau Perez", "Vereda", "Trevi", "Trevi C2", "Irma", "Imperio C1", "Imperio C2",
			 "Cambridge", "Opera", "Saiman", "Saiman C2", "Oxford C2"];
			 
var coeficients = 
[
	[1, 1.1, 1.2, 1.3, 1.5, 1.8, 1.9, 2.1],
	[1, 1.1, 1.2, 1.3, 1.4, 1.65, 1.75, 1.85]
];
			 
var colorCode = 0;	//default color
var modelCode = 0; // default model
var totalPrice = 0;

function printOption(option)
{
	for (var i = 0; i < option.length; i++)
	{
		document.write("<option value=" + 'option[i]' + ">"  + option[i] + "</option>");
	}
}
			 
var stillTable = 
[
[35,40,44,49,53,57,61,66,70,74,79,83,87,91,95,99,104],	// 100
[35,40,44,49,54,58,62,66,70,74,80,84,88,92,96,100,105],	// 110
[37,41,45,51,56,60,64,69,73,77,83,87,92,96,101,105,109],
[37,41,46,51,56,60,65,69,74,78,84,88,92,97,101,106,110],
[38,43,47,53,58,62,67,72,76,81,87,92,96,101,106,110,115],
[38,43,47,53,58,63,67,72,77,82,88,92,97,102,107,111,116],
[38,43,48,54,59,63,68,73,78,82,88,93,98,103,107,112,117],
[39,44,49,55,61,65,70,76,80,85,92,97,102,107,112,117,122],
[39,45,49,56,61,66,71,76,81,86,92,97,102,108,113,117,123],
[40,46,51,57,63,68,73,79,84,89,96,101,106,112,117,122,128],
[40,46,51,58,63,68,74,79,84,90,96,102,107,113,118,123,129],
[40,46,51,58,64,69,74,80,85,90,97,102,108,113,119,124,129],
[41,47,53,60,66,71,76,82,88,93,101,106,111,117,123,128,134],
[42,48,53,60,66,71,77,83,88,94,101,107,112,118,124,129,135],
[43,49,55,62,68,74,79,86,91,97,105,110,116,122,128,134,140],
[43,49,55,62,68,74,80,86,92,98,105,111,117,123,129,135,141]	// 250
//40 | 50 | 60 ... 200
];

var maxiStilTable = 
[
[47,51,54,58,61,71,74,78,81,85,93,98,98,105,108,116,120,123,127,132,140,143,147,150,154,162,165],	// 60
[49,51,56,60,64,74,78,81,85,89,97,103,103,110,114,122,126,130,133,139,147,151,155,159,162,171,174],	// 70
[49,53,57,61,65,75,79,83,86,90,99,105,105,112,116,125,128,132,136,142,150,154,158,162,166,174,178],
[50,55,59,63,65,78,82,86,90,94,103,109,109,118,122,130,135,139,143,149,158,162,166,170,174,183,187],
[51,55,60,64,68,79,83,87,92,96,105,111,111,120,124,133,137,141,145,152,161,165,169,173,178,186,191],
[52,56,60,65,69,80,84,89,93,97,106,113,113,122,126,135,139,144,148,154,163,168,172,177,181,190,194],
[53,57,62,67,71,83,87,92,97,101,111,117,117,127,131,141,146,150,155,161,171,176,180,185,190,199,204],
[54,59,64,68,73,85,89,94,99,104,113,120,120,130,134,144,149,153,158,165,174,179,184,189,194,203,208],
[55,60,65,71,76,87,92,98,103,108,118,125,125,135,140,150,155,160,165,172,182,187,192,197,202,212,217],
[56,61,66,71,77,88,94,99,104,109,119,126,126,137,142,152,157,162,168,175,185,190,195,200,206,216,221],
[56,62,67,72,78,90,95,100,106,111,121,128,128,139,144,154,160,165,170,177,188,193,198,204,209,219,224],
[58,63,69,74,80,92,98,104,109,115,125,133,133,144,150,160,166,171,177,185,195,201,206,212,218,228,234],
[58,64,70,75,81,94,99,105,111,117,127,135,135,146,152,163,168,174,180,187,198,204,210,215,221,232,237],
[59,65,72,78,84,96,102,109,115,121,132,139,139,152,158,169,175,181,187,195,206,212,218,224,230,241,247],
[60,67,73,79,85,98,104,110,116,123,134,142,142,154,160,171,177,184,190,198,209,215,221,227,233,244,251],
[61,67,73,80,86,99,105,112,118,124,135,143,143,156,162,173,180,186,192,200,212,218,224,230,237,248,254],
[62,69,75,82,88,102,108,115,122,128,140,148,148,161,168,179,186,193,199,208,219,226,232,239,245,257,263],
[63,69,76,83,89,103,110,116,123,130,141,150,150,163,170,182,188,195,202,210,222,229,235,242,249,260,267],
[64,71,78,85,92,106,113,120,127,134,146,155,155,169,176,188,195,202,209,217,229,236,243,250,257,269,276],
[64,72,79,86,93,107,114,121,128,135,147,156,156,171,178,190,197,204,211,220,232,239,246,254,261,273,280],
[65,72,79,87,94,108,115,122,130,137,149,158,158,173,180,192,199,206,214,223,235,242,249,257,264,276,283],
[66,74,81,89,96,111,118,126,133,141,153,163,163,178,185,198,206,213,221,230,243,250,258,265,273,285,293],
[67,74,82,90,97,112,119,127,135,142,155,165,165,180,187,200,208,215,223,233,245,253,261,268,276,289,296],
[68,76,84,92,100,115,123,131,138,146,159,169,169,185,193,206,214,222,230,240,253,261,269,277,285,298,306],
[69,77,85,93,101,116,124,132,140,148,161,171,171,187,195,208,216,225,233,242,256,264,272,280,288,301,309]	// 300
//40 | 50 | 60 ... 300
];

function findPrize(arg)
{
	var local = Math.round(Math.ceil(arg)/10);
	
	//local = local / 10;
	local = local - 4;
	
	if(local < 0)
	{
		local = 0;
	}	
	return local;
}

//Receving Info from dropdown menu
function getColor(color)
{
	colorCode = color.selectedIndex;
}
	
function getModel(model)
{
	modelCode = model.selectedIndex;
}

function CheckBoundories(model, w , h)
{
	var errMSG = "Зададените размери са извън позволената ширина/височина на продукта";
	if(model == 0)
	{
		if(w < 30 || w > 200 || h < 30 || h > 250)
		{
			alert(errMSG);
		}
	}
	else
	{
		if(w < 40 || w > 300 || h < 40 || h > 300)
		{
			alert(errMSG);
		}
	}
}

function printFinalPrice()
{
	var sizeWidth = document.getElementById("sunblindWidth").value; 
	var sizeHeight = document.getElementById("sunblindHeight").value;	
	var discount = 8;	//precent discount
	var K = 0;	// multiplier
	var strVodene = document.getElementById("stranichnoVodene").checked;
	
	CheckBoundories(modelCode,sizeWidth, sizeHeight);
	
	sizeWidth = findPrize(sizeWidth);
	sizeHeight = findPrize(sizeHeight) - 6;
	if(sizeHeight < 0)
	{
		sizeHeight = 0;
	}
	
	
	switch(modelCode)
	{
		case 0:
		totalPrice = stillTable[sizeHeight][sizeWidth];
		break;
		
		case 1:
		totalPrice = maxiStilTable[sizeHeight + 4][sizeWidth];
		break;
	}
	
	switch(colorCode)
	{
		case 0:
		K = 0;
		break;
		
		case 1:
		case 2:
		case 3:
		case 4:
		case 5:
		K = 1;
		break;
		
		case 6:
		case 7:
		K = 2;
		break;
		
		case 8:
		K = 3;
		break;
		
		case 9:
		case 10:
		K = 4;
		break;
		
		case 11:
		case 12:
		K = 5;
		break;
		
		case 13:
		case 14:
		case 15:
		K = 6;
		break;
		
		default:
		K = 7;
		break;	
	}
	
	totalPrice *= coeficients[modelCode][K];
	if(strVodene == 1)
	{
		totalPrice += 6;
	}
	totalPrice -= totalPrice * (discount /100);
	
	document.getElementById("finalPrice").innerHTML = totalPrice.toFixed(2) + " лв.";
	totalPrice = 0;
	return false;
}

